{% for group in site.data.portals.[include.portal] %}

<div class="portal-group">
  <h2>{{ group.groupName }}</h2>
  {% for portal in group.portals %}
  <div class="portal">
    <span class="portal-name">
      <span class="portal-add">➕ </span>
      {{portal.portalName}} {% if portal.note %}
      <span class="portal-note">{{ portal.note }}</span>
      {% endif %}
    </span>
    <div class="portal-details">
      <span class="portal-url">
        <a href="{{portal.primaryURL}}" target="blank">{{portal.primaryURL}}</a>
      </span>
      {% if portal.secondaryURLs %}
      <span class="portal-secondary-urls">
        &ensp;• {% for secondary in portal.secondaryURLs %}<a
          href="{{secondary.url}}"
          target="_blank"
          >{{secondary.icon}}</a
        >&thinsp;{% endfor %}
      </span>
      {% endif %}
    </div>
  </div>
  {% endfor %}
</div>

{% endfor %}

<script type="text/javascript">
  window.onload = function () {
    Array.from(document.getElementsByClassName("portal-add")).forEach((e) =>
      e.addEventListener("click", (event) => {

        let portalName = event.target.parentNode.innerText
        let primaryURL = event.target.parentElement.parentElement.children[1].children[0].children[0].href
        let newLink = {
            portalName,
            primaryURL
        }

        addLinkToLocalStorage(newLink)

      })
    );
  };
</script>


